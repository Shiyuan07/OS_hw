### 6.1	非连续内存分配的需求背景
 1. 为什么要设计非连续内存分配机制？
	* 提高分配的灵活性
	* 提高内存的利用效率：方便共享、充分利用内存空间

 2. 非连续内存分配中内存分块大小有哪些可能的选择？大小与大小是否可变?
	* 段式分配，块大小大，可变；
	* 页式分配，块大小小，不可变。
 3. 为什么在大块时要设计大小可变，而在小块时要设计成固定大小？小块时的固定大小可以提供多种选择吗？
	 * 大块的大小可变的内存块能更加灵活地满足内存需求，减少内部碎片的产生。而小块固定大小则更便于管理。
	 * 小块的固定大小可以提供多种选择，但为了方便管理通常有地址对齐的要求。
### 6.2	段式存储管理
 1. 什么是段、段基址和段内偏移？
	 * 段表示访问方式和存储数据等属性相同的一段地址空间。
	 * 段基址是一个段的起始地址。
	 * 段内偏移是段中某数据的地址偏移段基址的距离。
 2. 段式存储管理机制的地址转换流程是什么？为什么在段式存储管理中，各段的存储位置可以不连续？这种做法有什么好处和麻烦？
	 * 段式存储管理中，地址转换是段基址（段号）加段内偏移
	 * 段反映了程序的存储逻辑结构，程序不会从一个段的基址去访问另一个段，于是不同的段可以不连续。
	 * 好处是可以不连续，方便内存管理；麻烦是地址转换稍微复杂了一些。


### 6.3	页式存储管理
 1. 什么是页（page）、帧（frame）、页表（page table）、存储管理单元（MMU）、快表（TLB, Translation Lookaside Buffer）和高速缓存（cache）？
	* 页：虚拟地址中的一块固定大小空间；
	* 帧：物理内存中的页面；
	* 页表：储存页与帧映射的表；
	* MMU：负责管理内存的元件，包含TLB等部分；
	* 快表：硬件上维护页与帧映射的结构，能够快速找到页对应的帧；
	* 高速缓存：硬件上对内存的缓存，能够储存最近使用的数据，减少内存寻址，加快速度。
 2. 页式存储管理机制的地址转换流程是什么？为什么在页式存储管理中，各页的存储位置可以不连续？这种做法有什么好处和麻烦？
	* 页式存储管理中，地址转换是页号加页内偏移
	* CPU使用连续的逻辑地址，存储访问时，逻辑地址先分成逻辑页号和页内偏移，然后通过页表定义的对应关系，把逻辑页面转换成物理页号，最后再把物理页号加页内偏移得到物理地址；于是不同的段可以不连续。
	* 好处是可以不连续，方便内存管理中的存储分配和回收；麻烦是地址转换比较复杂（页表项访问开销和页表存储开销），并且频繁进行（每次存储访问会变成两次或更多）。

### 6.4	页表概述
 1. 每个页表项有些什么内容？有哪些标志位？它们起什么作用？
 * 标志位，帧号；
 * 存在位：是否存在对应物理帧；修改位：是否修改过；引用位：是否有程序正在使用
 2. 页表大小受哪些因素影响？
	* 页大小、地址空间大小、进程数目

### 6.5	快表和多级页表
 1. 快表（TLB）与高速缓存（cache）有什么不同？
	 * 快表是对页表的缓存，而高速缓存是对进程运行的内存进行缓存。
 2. 为什么快表中查找物理地址的速度非常快？它是如何实现的？为什么它的的容量很小？
	 * 快表是通过硬件级别的比较器与选择器同时比较页号的各位，因而速度比软件实现的页表快；
	 * 如果TLB容量增大，可能会导致频繁的TLB更新，反而减慢速度。TLB容量过大会导致成本迅速上升。
 3. 什么是多级页表？多级页表中的地址转换流程是什么？多级页表有什么好处和麻烦？
	* 多级页表是一种树状结构，可以将低级页表的信息储存在高级页表中；
	* 将逻辑地址分为描述符与多级偏移，先用描述符找到最高级页表，然后循环通过偏移在当前页表中寻找下级页表，最后通过页内偏移获得实际物理地址。
	* 好处是不需要为所有页建立页表，节省空间；坏处是需要多次寻址，速度慢。


### 6.6	反置页表
 1. 页寄存器机制的地址转换流程是什么？
	 * 根据逻辑地址进行hash，然后查相应的页寄存器。页寄存器会储存当前进程使用的页表起始地址，获得虚拟地址后，首先分成页号和页内偏移，然后从页表起始地址获取页号对应的物理帧，最后加上页内偏移得到物理地址。
 1. 反置页表机制的地址转换流程是什么？
	 * 逻辑地址和进程号共同进行hash，然后查相应页寄存器。反置页表储存每个物理帧所对应的虚拟页与其所在进程。获得虚拟地址后，首先分成页号和页内偏移，然后计算页号哈希值，由此寻找对应项，如果进程和页号都符合，获得帧号，否则沿next项继续寻找直至找到或失败，再将帧基址与偏移组合获得物理地址，或者报缺页错误。
 1. 反置页表项有些什么内容？
	* 标志位、物理帧对应的进程号、虚拟页号、next项。

### 6.7	段页式存储管理
 1. 段页式存储管理机制的地址转换流程是什么？这种做法有什么好处和麻烦？
	* 对于给出的逻辑地址，根据段寄存器中的内容选择到GDT或LDT中对应的段表中查询虚拟地址所对应的段的基址。查询过程中需要进行地址是否越界的检查。根据段基址和逻辑地址中的段内偏移对段进行访问。
	* 这种做法增强了对内存的保护，防止越权访问以及进程对不属于自身的存储空间访问。麻烦是增加了地址转换的复杂度。
 1. 如何实现基于段式存储管理的内存共享？
	 * 硬件实现，由存储保护键和界限寄存器实现。
	 * 通过对代码的动态链接，将要共享的部分段基址设为相同。以段为单位，使多道程序共享同一代码库。
 1. 如何实现基于页式存储管理的内存共享？
	* 将相关进程的逻辑空间中的页指向相同的内存块，并设置相关存储保护，采用换出的方式来实现内存的共享。
